app sync healthkit database background wrap head logic determines hkobserverqueries run updatehandlers data various different sample types assume observer query right apple function enablebackgrounddeliveryfortype healthkit wakes app new samples specified type saved store enable background deliveries execute observerqueries say blood glucose weight run updatehandlers input data health app happen enable background delivery sample types
