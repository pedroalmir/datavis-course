problem wait async query healthkit return result allowing execution move returned data critical execution know asked solved times read posts tried completion handlers dispatch sync dispatch groups able come implementation works completion handler wait completion handler finish swift calls method run healthkit query work block variable hold execution pending callback concept different blocking semaphores ugly asking trouble completion doesn return reason better way dispatch groups put dispatch group calling function level calling function receiving function completion executes notify method called block variable updated program hangs exits statement put dispatch group target function leave notify calling level issue dispatch documentation posts say wait block complete sync method complete mean mean complete function later async completion example hold execution completion returns thank help
