implemented tree structure query mechanism sql entity value attribute based database design wanted performance functionality xquery based approach assuming possible xquery task simplified form tree xlm document follows different types nodes attribute query archetype node attribute node test query attempted write aims select evaluation node right element nodes query implementation requires two key capabilities language ability support structural definitions boolean operators ability define constraints attributes nodes xml attributes case xquery two problems manage declare references nodes interest node interested graph figure return matches matches right hand side tree composition evaluation turn two elements naive attempt flwr problem end pushing evaluation element nodes subqueries filtering based attribute values location work introduce global variables main flowr body clueless comes returning results did ask separate question ideally enforce constraint evaluation having elements codes right hand side tree constraint elements tree doable xquery works test existence structure looking tree access individual nodes update second attempt actually opens door trying sure right way xquery ask question improving approach basically enforce parent child relations statements return values corresponding matches turn tree
