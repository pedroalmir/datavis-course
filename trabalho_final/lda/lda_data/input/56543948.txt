implement mediat design pattern spring rest app work fhir api patientservic interfac implement class dstu2patientservic stu3patientservic client implement fhir dstu2 api demograph procedur stu3 case distinguish servic dstu2 stu3 call request come patient health data ehr system mediat pattern achiev call dynam don condit applic properti fhirpatientservic java integr fhir dstu2 api dstu2patientservic java integr fhir stu3 api stu3patientservic java fhircompon java