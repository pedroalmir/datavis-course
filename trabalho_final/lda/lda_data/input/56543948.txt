implement mediator design pattern spring rest app working fhir apis patientservice interface implementation class dstu2patientservice stu3patientservice client implemented fhir dstu2 api demographics procedure stu3 case distinguish service dstu2 stu3 called request comes patient health data ehr system mediator pattern achieve call dynamically don condition application properties fhirpatientservice java integrated fhir dstu2 api dstu2patientservice java integrated fhir stu3 api stu3patientservice java fhircomponent java