ios9 healthkit issue requestauthorizationtosharetype apple code fit app determine user cont given access app read write data approach changed ios9 ios9 allow allow button choice user makes returns mean longer able determine user allowed app show user step activate health kit depending flag ios9 failed apple doc quoted say permission appear data requested type determine data user given access please find apple dev link know correct approach workaround mind check valid source call back looking device source available assume auth issue putting code find option code fit app source detection