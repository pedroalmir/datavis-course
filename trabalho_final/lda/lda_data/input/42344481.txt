calculate windowing dicom implementing dicom image viewer don allowed frameworks library image processing algorithm calculate windowing window center window width following thing work pixel data stored byte pixel stored hounsfield unit 1st code tried following calculating rescale edited calculating windowing 2nd code return time image black idea wrong edit edited code following paolo brandolis suggestion store int rescale intercept rescale slope window center window width black wrong suggestion