swift wait async result healthkit hkquery continuing execution problem wait async query healthkit return result allowing execution move returned data critical execution know asked solved time read post tried completion handlers dispatch sync dispatch group able come implementation works completion handler calls method run healthkit query work block variable hold execution pending callback concept different blocking semaphore ugly asking trouble completion doesn return reason better way dispatch group put dispatch group calling function level calling function receiving function completion execute notify method called block variable updated program hangs exits statement put dispatch group target function leave notify calling level issue dispatch documentation post say wait block complete sync method complete mean mean complete function later async completion example hold execution completion returns thank help