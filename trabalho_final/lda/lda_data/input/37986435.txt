logic hkobserverquery background delivery app sync healthkit database background wrap head logic determines hkobserverquery run updatehandler data various different sample type assume observer query right apple function enablebackgrounddeliveryfortype healthkit wakes app new samples specified type saved store enable background delivery execute observerquery say blood glucose weight run updatehandlers input data health app happen enable background delivery sample type