resource identifier fhir server scenario ehr system integrating device sensor partner fhir scenario company independent fhir server different patient organization record identifiers preference sensor fhir server keep mapping ehr identifier internal identifier resources ehr wants assign patient device sensor fhir server step 1st ehr list device resource given organization patient currently assigned sensor fhir server assume organization identifier ehr system ehr system doesn knowledge sensor system organization identifier point reply call bundle devices snip snip question owner organization reference identifier search internal logical known sensor fhir server snippet step clinician ehr system chooses device list assign patient ehr system step ehr system issue put api device request back sensor fhir server assign patient resource device resource question resource uri identifier patient resource assume ehr system ehr system doesn knowledge sensor system patient identifier notice organization reference uri sensor fhir server patient reference uri ehr system smells funny step ehr issue api device sensor fhir server back device resource question expect reference patient containing absolute uri ehr fhir server put step sensor fhir server modified return reference resource fhir server internal logical